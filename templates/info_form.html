<!doctype html>
<html>
<head>
  <title>Information form</title>
</head>
<body>
<h1>Information for {{ course.name }}</h1>
<p>Participant: {{ participant.first_name }} {{ participant.last_name }} ({{ participant.email }})</p>

{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    <ul>
      {% for cat, msg in messages %}
        <li><strong>{{ cat }}:</strong> {{ msg }}</li>
      {% endfor %}
    </ul>
  {% endif %}
{% endwith %}

<form method="post">
  <h2>Questions</h2>
  {% for q in questions %}
    <div>
      <label>
        {{ q.label }}{% if q.required %} *{% endif %}<br>
        <input type="text" name="q_{{ q.id }}" value="{{ answers_map.get(q.id, '') }}">
      </label>
    </div>
  {% endfor %}

  <h2 id="hotel">Hotel</h2>
  {% set hr = hotel %}
  <p>Do you need a hotel room?</p>
  <label><input type="radio" name="need_hotel" value="yes"
    {% if hr and hr.need_hotel %}checked{% endif %}> Yes</label>
  <label><input type="radio" name="need_hotel" value="no"
    {% if hr and hr.need_hotel is not none and not hr.need_hotel %}checked{% endif %}> No</label>

  <div>
    <p>Select nights (if Yes):</p>
    {% if course.hotel_night1 %}
      <label>
        <input type="checkbox" name="night1" {% if hr and hr.night1 %}checked{% endif %}>
        Night 1 ({{ course.hotel_night1 }})
      </label><br>
    {% endif %}
    {% if course.hotel_night2 %}
      <label>
        <input type="checkbox" name="night2" {% if hr and hr.night2 %}checked{% endif %}>
        Night 2 ({{ course.hotel_night2 }})
      </label><br>
    {% endif %}
    {% if course.hotel_night3 %}
      <label>
        <input type="checkbox" name="night3" {% if hr and hr.night3 %}checked{% endif %}>
        Night 3 ({{ course.hotel_night3 }})
      </label><br>
    {% endif %}
  </div>

  <button type="submit">Save</button>
</form>

</body>
</html>
